(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66830404"],{"4de1":function(t,e,n){"use strict";n.d(e,"a",function(){return v});n("7f7f"),n("55dd"),n("7514");var r,a,i=n("7618"),s=(n("ac6a"),n("5df3"),n("d225")),u=n("b0b4"),c=(n("96cf"),n("3b8d")),o=n("beb6"),p=n.n(o),l=(n("20cb"),n("17e3")),f=n("1b0c"),d=n.n(f),h=n("1397"),b=n("21f8"),g=n("4b59"),y=(n("3350"),n("4815"),p()(function(){})),m=function(t){return function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",window.wallet.sign({blockchain:l["Blockchains"].EOSIO},t,{data:n},!0,!0));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},v=function(){function t(){Object(s["a"])(this,t)}return Object(u["a"])(t,null,[{key:"isAvailable",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.race([new Promise(function(t){return setTimeout(function(){return t(!1)},2e3)}),y.chains().then(function(t){return!("object"===Object(i["a"])(t)&&t.hasOwnProperty("error")&&"Could not contact API host."===t.error)}).catch(function(){return!1})]);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getAppReputation",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",y.findReputation("app::".concat(e.applink)).catch(function(){return null}));case 1:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"validName",value:function(t){return y.validName(t)}},{key:"findIdentity",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,y.findIdentity(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"payForIdentity",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(n){var i,s,u,c,o,p,l,f,m,v,k;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.identify(n));case 8:if(c=e.sent,"setup"!==c){e.next=22;break}if(o=a+i-+new Date,!(o<6e4)){e.next=17;break}return e.next=14,new Promise(function(t){return setTimeout(function(){return t(!0)},o+2e3)});case 14:return e.abrupt("return",t.payForIdentity(n));case 17:return p=h["a"].tokens().find(function(t){return t.uniqueWithChain()===r.tokenUnique}).clone(),e.next=20,u(p);case 20:e.next=24;break;case 22:return console.log("status",c),e.abrupt("return",t.identify(n));case 24:e.next=45;break;case 26:return e.next=28,y.getIdentityPaymentMethods().catch(function(){return[]}).then(function(t){return t.map(function(t){return d.a.fromJson(t)})});case 28:if(l=e.sent,f=h["a"].tokens().filter(function(t){var e=l.find(function(e){return e.uniqueWithChain()===t.uniqueWithChain()});return!!e&&e.amount<=t.amount}).sort(function(t,e){return e.amount-t.amount}),f.length){e.next=32;break}return e.abrupt("return",b["a"].push(g["a"].snackbar("You don't have any tokens to pay for this identity with.")));case 32:return m=f[0],v=h["a"].tokens().find(function(t){return t.uniqueWithChain()===m.uniqueWithChain()}).clone(),e.next=36,y.startIdentityPayment(n.name,n.personal.email,m).catch(function(){return null});case 36:if(k=e.sent,k){e.next=39;break}return e.abrupt("return",b["a"].push(g["a"].snackbar("There was an issue paying for this identity. Please contact support. [1]")));case 39:if(k.success){e.next=41;break}return e.abrupt("return",b["a"].push(g["a"].snackbar(k.error)));case 41:return r=k.data,a=+new Date,e.next=45,u(v);case 45:if(!s){e.next=54;break}return e.next=48,y.finishPayment(r.id,s.txid,s.block_num);case 48:return e.sent,e.next=51,new Promise(function(t){return setTimeout(function(){return t(!0)},1e3)});case 51:return e.abrupt("return",t.identify(n));case 54:return setTimeout(function(){r=null,a=null},i),e.abrupt("return",!1);case 56:case"end":return e.stop()}},e)}));function n(t){return e.apply(this,arguments)}return n}()},{key:"identify",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y.identify(n.name,n.publicKey,"local");case 2:if(r=e.sent,r&&r.success){e.next=5;break}return e.abrupt("return",!1);case 5:a=null;case 6:if(a){e.next=15;break}return e.next=9,t.findIdentity(n.name);case 9:if(a=e.sent,a){e.next=13;break}return e.next=13,new Promise(function(t){return setTimeout(function(){return t(!0)},500)});case 13:e.next=6;break;case 15:if(a){e.next=17;break}return e.abrupt("return",b["a"].push(g["a"].snackbar("There was an error registering this identity. Please try again.")));case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}},e)}));function n(t){return e.apply(this,arguments)}return n}()},{key:"changeKey",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n,r,a){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p()(m(a)).changekey(e,n,r);case 2:return i=t.sent,i||b["a"].push(g["a"].snackbar("There was an error sending this rating.")),i&&!i.success&&b["a"].push(g["a"].snackbar(i.error)),t.abrupt("return",!(!i||!i.success)&&{txid:i.txid});case 6:case"end":return t.stop()}},t)}));function e(e,n,r,a){return t.apply(this,arguments)}return e}()},{key:"repute",value:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,n,r,a,i){var s,u,c,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=o.length>5&&void 0!==o[5]?o[5]:"",u=o.length>6?o[6]:void 0,t.next=4,p()(m(u)).repute(e,n,r,a,i,s);case 4:return c=t.sent,c||b["a"].push(g["a"].snackbar("There was an error sending this rating.")),c&&!c.success&&b["a"].push(g["a"].snackbar(c.error)),t.abrupt("return",c&&c.success);case 8:case"end":return t.stop()}},t)}));function e(e,n,r,a,i){return t.apply(this,arguments)}return e}()}]),t}()},"6c89":function(t,e,n){"use strict";var r=n("718f"),a=n.n(r);a.a},"718f":function(t,e,n){var r=n("f0f9");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=n("499e").default;a("7e813c76",r,!0,{sourceMap:!1,shadowMode:!1})},beb6:function(t,e,n){const r="aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906",a="http://localhost:6543",i=function t(e){function n(t,e){return t>>>e|t<<32-e}for(var r,a,i=Math.pow,s=i(2,32),u="length",c="",o=[],p=8*e[u],l=t.h=t.h||[],f=t.k=t.k||[],d=f[u],h={},b=2;64>d;b++)if(!h[b]){for(r=0;313>r;r+=b)h[r]=b;l[d]=i(b,.5)*s|0,f[d++]=i(b,1/3)*s|0}for(e+="Â€";e[u]%64-56;)e+="\0";for(r=0;r<e[u];r++){if(a=e.charCodeAt(r),a>>8)return;o[r>>2]|=a<<(3-r)%4*8}for(o[o[u]]=p/s|0,o[o[u]]=p,a=0;a<o[u];){var g=o.slice(a,a+=16),y=l;for(l=l.slice(0,8),r=0;64>r;r++){var m=g[r-15],v=g[r-2],k=l[0],x=l[4],w=l[7]+(n(x,6)^n(x,11)^n(x,25))+(x&l[5]^~x&l[6])+f[r]+(g[r]=16>r?g[r]:g[r-16]+(n(m,7)^n(m,18)^m>>>3)+g[r-7]+(n(v,17)^n(v,19)^v>>>10)|0),R=(n(k,2)^n(k,13)^n(k,22))+(k&l[1]^k&l[2]^l[1]&l[2]);l=[w+R|0].concat(l),l[4]=l[4]+w|0}for(r=0;8>r;r++)l[r]=l[r]+y[r]|0}for(r=0;8>r;r++)for(a=3;a+1;a--){var _=l[r]>>8*a&255;c+=(16>_?0:"")+_.toString(16)}return c},s=t=>e=>fetch(`${t}/v1/${e}`).then(t=>t.json()).catch(()=>({error:"Could not contact API host."})),u=t=>(e,n)=>fetch(`${t}/v1/${e}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(t=>t.json()).catch(()=>({error:"Could not contact API host."})),c=(t,e=a)=>{if(!t)throw"You must pass a signer into RidlJS";const n=s(e),c=u(e),o=t=>n(`/block_num/${t}`);return{validName(t){return/^(?:(?=.{3,56}$)[a-zA-Z0-9]{1}(?:(?!-{2,}))[a-zA-Z0-9-]*(?:(?<!-))$)/.test(t)},async chains(){return n("chains")},async hosts(t){return n(`hosts/${t}`)},async addHost(t,e,n={}){return c("hosts",{chain_id:t,host:e,options:n})},async findIdentity(t){return n(`identity/${t}`)},async findReputation(t){return n(`reputation/${t}`)},async getIdentityPaymentMethods(){return n("pay/methods/id")},async getUsagePaymentMethods(){return n("pay/methods/actions")},async startIdentityPayment(t,e,n){return c("pay/start",{username:t,email:e,token:n,type:0})},async startUsagePayment(t,e,n){return c("pay/start",{username:t,email:e,token:n,type:1})},async finishPayment(t,e,n){return c("pay/finish",{payment_id:t,txid:e,block_num:n})},async getPaymentStatus(t){return n(`pay/status/${t}`)},async identify(t,e,n=r){return c("send/identify",{chain:n,username:t,key:e})},async changekey(e,n,r,a=null,s=null){if(null===a){if(a=await o(r),!a)return{error:"Could not get block num from server."};s=await t(i(`${e}:${a}:${n}`))}return c("send/changekey",{chain:r,identity_id:e,key:n,block_num:a,sig:s})},async repute(e,n,r,a,s,u="",p=null,l=null){if(null===p){if(p=await o(s),!p)return{error:"Could not get block num from server."};l=await t(i(`${e}:${n}:${p}:${r.map(t=>`${t.type}${t.value}`).join("")}:${a}`))}return c("send/repute",{chain:s,identity_id:e,entity:n,fragments:r,tokens:a,block_num:p,sig:l,details:u})}}};t.exports=c,"undefined"!==typeof window&&(window.RidlJS=c)},ea72:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"view-app-ratings"},[n("section",{staticClass:"popup-content"},[n("section",{class:{logos:!!t.app.img}},[n("figure",{staticClass:"logo"},[t.app.img?n("img",{attrs:{src:t.app.img}}):t._e()])]),n("figure",{staticClass:"title"},[n("b",[t._v(t._s(t.app.name))])]),t.state===t.STATES.VIEW?n("section",[n("figure",{staticClass:"sub-title"},[t._v(t._s(t.app.description))]),t.ridlIsAvailable?n("section",{staticClass:"ratings"},[n("section",{staticClass:"stars",class:{active:null!==t.star},on:{mouseout:function(e){t.star=null}}},t._l(t.stars,function(e){return n("figure",{staticClass:"star fas fa-star",class:{active:null!==t.star?t.star>=e:e<=t.rating},on:{click:function(n){return t.clickStar(e)},mouseover:function(n){return t.hoverStar(e)}}})}),0),t.overall?t._e():n("span",{staticClass:"notice"},[t._v("This app doesn't have any ratings yet!")]),t.usingIdentity?n("span",[t._v("Help keep Scatter users safe by adding your own rating to "),n("b",[t._v(t._s(t.app.name))]),t._v(", just tap a star to start.")]):t._e(),t.ridlIsAvailable&&!t.usingIdentity?n("span",{staticClass:"clickable",on:{click:t.goToIdentity}},[n("u",[t._v("You don't have a registered digital identity yet.")])]):t._e()]):t._e(),null===t.ridlIsAvailable?n("section",{staticClass:"ratings"},[t._m(0)]):t._e()]):t._e(),t.state===t.STATES.RATE?n("section",[n("section",{staticClass:"ratings less-margin"},[n("section",{staticClass:"stars active"},t._l(t.stars,function(e){return n("figure",{staticClass:"star fas fa-star",class:{active:t.star>=e}})}),0),n("br"),n("Input",{staticStyle:{"margin-bottom":"0"},attrs:{textarea:"1",placeholder:"Do you want to let the world know why you think "+t.app.name+" deserves a "+t.star+" star rating?"},on:{changed:function(e){return t.details=e}}})],1)]):t._e(),t.state===t.STATES.RATED?n("section",[n("figure",{staticClass:"sub-title"},[t._v("Your rating has been sent to the network!")]),n("section",{staticClass:"ratings"},[n("section",{staticClass:"stars active"},t._l(t.stars,function(e){return n("figure",{staticClass:"star fas fa-star",class:{active:t.star>=e}})}),0),n("span",[t._v("You have given "+t._s(t.app.name)+" a "+t._s(t.star)+" star rating. Thanks for your help!")])])]):t._e()]),t.state===t.STATES.VIEW?n("section",{staticClass:"popup-buttons"},[n("Button",{attrs:{text:"Close"},nativeOn:{click:function(e){return t.closer(null)}}}),n("Button",{attrs:{primary:"1",text:"Open App",icon:"fas fa-rocket"},nativeOn:{click:function(e){return t.open(e)}}})],1):t._e(),t.state===t.STATES.RATE?n("section",{staticClass:"popup-buttons"},[n("Button",{attrs:{disabled:t.submittingRating,text:"Back"},nativeOn:{click:function(e){return t.clearRating(e)}}}),n("Button",{attrs:{loading:t.submittingRating,primary:"1",text:"Submit Rating",icon:"fas fa-external-link-square"},nativeOn:{click:function(e){return t.submitRating(e)}}})],1):t._e(),t.state===t.STATES.RATED?n("section",{staticClass:"popup-buttons"},[n("Button",{attrs:{primary:"1",text:"Close"},nativeOn:{click:function(e){return t.closer(null)}}})],1):t._e()])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{},[t._v("Loading ratings "),n("i",{staticClass:"fa fa-spinner animate-spin"})])}],i=(n("8e6e"),n("ac6a"),n("456d"),n("7f7f"),n("96cf"),n("3b8d")),s=(n("6b54"),n("7514"),n("bd86")),u=n("2f62"),c=n("4de1"),o=n("21f8"),p=n("4b59");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(n,!0).forEach(function(e){Object(s["a"])(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var d={VIEW:"view",RATE:"rate",RATED:"rated"},h={props:["popin","closer"],data:function(){return{state:d.VIEW,STATES:d,stars:[1,2,3,4,5],star:null,rating:0,submittingRating:!1,reputation:null,details:"",ridlIsAvailable:null}},computed:f({},Object(u["d"])(["scatter"]),{app:function(){return this.popin.data.props.app},overall:function(){return{value:20}},identity:function(){return this.scatter.keychain.identities[0]},usingIdentity:function(){return this.identity.ridl.toString().indexOf("::")>-1}}),mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].isAvailable();case 2:return this.ridlIsAvailable=t.sent,t.next=5,c["a"].getAppReputation(this.app);case 5:this.reputation=t.sent,this.reputation&&(this.overall?this.rating=this.overall.value/5:this.rating=null,this.$forceUpdate());case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{goToIdentity:function(){this.$router.push({name:this.RouteNames.Identity,query:{type:"digital"}}),this.closer(!0)},open:function(){this.openInBrowser(this.app.url),this.closer(!0)},hoverStar:function(t){this.star=t},clickStar:function(t){this.usingIdentity&&(this.star=t,this.state=d.RATE)},clearRating:function(){this.star=null,this.state=d.VIEW},submitRating:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n,r,a,i,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=.2,n=0,t.t0=this.star,t.next=1===t.t0?5:2===t.t0?7:3===t.t0?9:4===t.t0?11:5===t.t0?13:15;break;case 5:return e=1,t.abrupt("break",15);case 7:return e=.5,t.abrupt("break",15);case 9:return e=.2,t.abrupt("break",15);case 11:return e=.5,t.abrupt("break",15);case 13:return e=1,t.abrupt("break",15);case 15:e="".concat(parseFloat(e).toFixed(4)," RIDL"),t.t1=this.star,t.next=1===t.t1?19:2===t.t1?19:3===t.t1?21:4===t.t1?21:5===t.t1?21:23;break;case 19:return n=-1,t.abrupt("break",23);case 21:return n=1,t.abrupt("break",23);case 23:return r="app::".concat(this.app.applink),a=[{type:"overall",value:n}],this.submittingRating=!0,t.next=28,c["a"].findIdentity(this.identity.name);case 28:if(i=t.sent,i){t.next=32;break}return console.error(i),t.abrupt("return",o["a"].push(p["a"].snackbar("Could not find identity!")));case 32:return t.next=34,c["a"].repute(i.id,r,a,e,i.chain,this.details,this.identity.publicKey);case 34:s=t.sent,s&&(this.state=d.RATED),this.submittingRating=!1;case 37:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},b=h,g=(n("6c89"),n("2877")),y=Object(g["a"])(b,r,a,!1,null,"b0a1769e",null);e["default"]=y.exports},f0f9:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.view-app-ratings[data-v-b0a1769e]{max-width:400px;width:calc(100% - 80px);margin:0 auto}.view-app-ratings .app-type[data-v-b0a1769e]{margin-top:-20px;font-size:13px}.view-app-ratings .sub-title[data-v-b0a1769e]{margin-top:-20px;font-size:14px}.logos[data-v-b0a1769e]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:space-evenly;-ms-flex-pack:space-evenly;justify-content:space-evenly;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;width:100%;margin-bottom:20px}.logos[data-v-b0a1769e]:after{content:"";position:absolute;display:block;top:50%;left:-40px;right:-40px;height:1px;background:rgba(0,168,255,.08);z-index:-1}.logo[data-v-b0a1769e]{background:#fff;position:relative;width:100px;height:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:20px;font-weight:700}.logo img[data-v-b0a1769e]{width:calc(100% - 10px);max-height:calc(100% - 10px);-o-object-fit:contain;object-fit:contain;overflow:hidden;border-radius:16px}.ratings[data-v-b0a1769e]{margin-top:50px}.ratings.less-margin[data-v-b0a1769e]{margin-top:20px}.ratings .stars .star[data-v-b0a1769e]{color:#999;font-size:28px;padding:0 4px;cursor:pointer}.ratings .stars .star.active[data-v-b0a1769e]{color:#00a8ff}.ratings .stars.active .star.active[data-v-b0a1769e]{color:#de4136}.ratings span[data-v-b0a1769e]{margin:0 auto;display:table;padding:15px 35px 0;font-size:11px}.ratings span.notice[data-v-b0a1769e]{color:#00a8ff}.ratings span.clickable[data-v-b0a1769e]{text-decoration:underline}.blue-steel .ratings .stars.active .star.active[data-v-b0a1769e]{color:#ff0}',""])}}]);